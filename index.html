<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Signals • Ultra Minimal</title>
  <style>
    :root {
      --bg: #0a0e17;
      --card: #111827;
      --text: #d1d5db;
      --green: #10b981;
      --red: #ef4444;
    }
    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      padding: 12px;
      background: var(--bg);
      color: var(--text);
      font-size: 0.95rem;
    }
    header {
      text-align: center;
      padding: 12px;
      background: var(--card);
      border-radius: 8px;
      margin-bottom: 12px;
    }
    h1 {
      margin: 0;
      font-size: 1.3rem;
      font-weight: 600;
    }
    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 12px 0;
    }
    input, button {
      padding: 8px 12px;
      border-radius: 6px;
      background: #1f2937;
      border: 1px solid #374151;
      color: white;
      font-size: 0.9rem;
    }
    button {
      background: #3b82f6;
      border: none;
      cursor: pointer;
    }
    button:hover { opacity: 0.9; }
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--card);
      border-radius: 8px;
      overflow: hidden;
      font-size: 0.9rem;
    }
    th, td {
      padding: 8px 10px;
      text-align: center;
      border-bottom: 1px solid #374151;
    }
    th {
      background: #111827;
      font-weight: 500;
      color: #9ca3af;
    }
    tr:hover {
      background: rgba(59,130,246,0.08);
    }
    .strong-buy { background: rgba(16,185,129,0.15); color: var(--green); font-weight: bold; }
    .buy       { color: var(--green); font-weight: bold; }
    .sell      { color: var(--red);   font-weight: bold; }
    .strong-sell { background: rgba(239,68,68,0.15); color: var(--red); font-weight: bold; }
    .neutral   { color: #9ca3af; }
  </style>
</head>
<body>

<header>
  <h1>Crypto Signals</h1>
  <div id="status" style="color:#9ca3af; font-size:0.85rem;">Loading...</div>
</header>

<div class="controls">
  <input type="text" id="search" placeholder="Search...">
  <button id="refresh">↻</button>
</div>

<table id="table">
  <thead>
    <tr>
      <th>Coin</th>
      <th>Price</th>
      <th>24h</th>
      <th>Signal</th>
      <th>Entry / TP / SL</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
</table>

<script>
const COINGECKO = 'https://api.coingecko.com/api/v3';

async function loadData() {
  const status = document.getElementById('status');
  status.textContent = 'Loading real-time data...';

  try {
    const res = await fetch(
      `${COINGECKO}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1&sparkline=false&price_change_percentage=24h`
    );
    const coins = await res.json();

    const tbody = document.getElementById('tbody');
    tbody.innerHTML = '';

    coins.forEach(c => {
      const ch24 = c.price_change_percentage_24h || 0;
      const volRatio = c.market_cap > 0 ? c.total_volume / c.market_cap : 0;

      let signal = 'NEUTRAL', cls = 'neutral';

      if (ch24 > 8 && volRatio > 2.5) {
        signal = 'STRONG BUY'; cls = 'strong-buy';
      } else if (ch24 > 4) {
        signal = 'BUY'; cls = 'buy';
      } else if (ch24 < -8 && volRatio > 2.5) {
        signal = 'STRONG SELL'; cls = 'strong-sell';
      } else if (ch24 < -4) {
        signal = 'SELL'; cls = 'sell';
      }

      const entry = c.current_price;
      const tp = (entry * 1.15).toFixed(4); // 15% TP
      const sl = (entry * 0.93).toFixed(4); // 7% SL

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td style="text-align:left">
          <img src="${c.image}" width="20" height="20" style="vertical-align:middle; margin-right:6px; border-radius:50%;">
          ${c.name} (${c.symbol.toUpperCase()})
        </td>
        <td>$${entry.toLocaleString(undefined,{minimumFractionDigits:2,maxFractionDigits:6})}</td>
        <td>${ch24.toFixed(2)}%</td>
        <td class="${cls}">${signal}</td>
        <td>$${entry.toFixed(4)} → $${tp} / $${sl}</td>
      `;
      tbody.appendChild(tr);
    });

    status.textContent = `Updated: ${new Date().toLocaleTimeString()}`;
  } catch (err) {
    status.textContent = 'Error loading data';
  }
}

document.getElementById('refresh').onclick = loadData;
document.getElementById('search').oninput = function() {
  const term = this.value.trim().toLowerCase();
  const rows = document.querySelectorAll('#tbody tr');
  rows.forEach(row => {
    const text = row.textContent.toLowerCase();
    row.style.display = text.includes(term) ? '' : 'none';
  });
};

window.onload = loadData;
setInterval(loadData, 900000); // 15 min
</script>
</body>
</html>
